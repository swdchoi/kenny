<div class="container p-3">
<% @invoices.each do |invoice| %>
  <% status = invoice.derived_status %>

  <div class="d-flex justify-content-between align-items-center mb-3">
    <!-- Status -->
    <div>
      <span class="badge rounded-pill bg-<%= {
        "draft"   => "secondary",
        "issued"  => "warning",
        "paid"    => "success",
        "overdue" => "danger"
      }[status] %>">
        <%= status.titleize %>
      </span>

      <small class="text-muted ms-2">
        Due <%= invoice.due_date %>
      </small>
    </div>

    <!-- Actions -->
    <div class="d-flex gap-2">
      <%= link_to "Edit Invoice",
          edit_invoice_path(invoice),
          class: "btn btn-sm btn-outline-secondary" %>

      <%= button_to "Delete Invoice",
          invoice_path(invoice),
          method: :delete,
          data: { confirm: "Delete invoice?" },
          form: { class: "d-inline" },
          class: "btn btn-sm btn-outline-danger" %>
    </div>
  </div>
<% end %>
</div>